define(["MusicFactory"],function(e){function t(){n.state.start(_nextState)}var n=null;return{init:function(e){n=e,n.load.image("transitionBackground","media/img/sky.png"),n.load.image("transitionLogo","media/img/Menu.png"),n.load.image("gameOver","media/img/gameOver.png")},nextState:function(e,a,i){var d=null;_nextState=e,null!=a&&(d=a.getMusic());var r=n.add.sprite(0,0,"transitionBackground");r.scale.set(1024/n.world.width,768/n.world.height);var o=(n.add.sprite(n.world.centerX-216,n.world.centerY-35,"logo"),null);o=i?"Niveau "+i:"",n.add.text(360,0,o,{wordWrap:!0,wordWrapWidth:n.world.width,fill:"#ffffff",stroke:"#000000",strokeThickness:2}),null!=d?(d.fadeOut(700),d.onFadeComplete.dispatch(),d.onFadeComplete.addOnce(function(){n.time.events.add(1*Phaser.Timer.SECOND,t,this),d=null},n)):(d=null,n.time.events.add(2*Phaser.Timer.SECOND,t,this))}}});