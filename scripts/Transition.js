define(["MusicFactory"],function(e){function t(){a.state.start(_nextState)}var a=null;return{init:function(e){a=e,a.load.image("transitionBackground","media/img/sky.png"),a.load.image("transitionLogo","media/img/Menu.png"),a.load.image("gameOver","media/img/gameOver.png")},nextState:function(e,n,i){var d=null;_nextState=e,null!=n&&(d=n.getMusic());var r=a.add.sprite(0,0,"transitionBackground");r.scale.set(1024/a.world.width,768/a.world.height);var o=(a.add.sprite(a.world.centerX-216,a.world.centerY-35,"logo"),null);o=i?"Niveau "+i:"",a.add.text(300,0,o,{wordWrap:!0,wordWrapWidth:a.world.width,fill:"#ffffff",stroke:"#000000",strokeThickness:2}),null!=d?(d.fadeOut(700),d.onFadeComplete.dispatch(),d.onFadeComplete.addOnce(function(){a.time.events.add(1*Phaser.Timer.SECOND,t,this),d=null},a)):a.time.events.add(2*Phaser.Timer.SECOND,t,this)}}});