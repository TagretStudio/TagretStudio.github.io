define(["Images","MusicFactory","Transition","LevelSelection"],function(e,n,t,l){function r(){c.scale.isFullScreen?(c.scale.stopFullScreen(),p.setFrames(3,4,5)):(p.setFrame(1),c.scale.startFullScreen(!1),p.setFrames(0,1,0))}function a(){m.kill(),t.nextState("LevelFactory",F)}function o(){w.kill(),t.nextState("LevelSelection",null)}function u(){M.kill(),t.nextState("Chargement",F)}var c=null,i=null,d=null,s=null,h=null,f=null,m=null,w=null,M=null,p=null,F=null,g={preload:function(){d=new Phaser.Point(c.world.centerX-216,c.world.centerY-66),s=new Phaser.Point(c.world.centerX+120,c.world.centerY-100),c.load.spritesheet("pleinecran","media/img/pleinEcran.png",480,62,6)},create:function(){c.scale.refresh(),0==F.isPlaying()&&F.play(),e.boot().create(),f=c.add.sprite(d.x,d.y,"logo"),h=c.add.group(),h.scale.set(c.world.width/1024,c.world.height/768),h.add(w=c.make.button(-5*Math.round(10*Math.random()),c.world.centerY+160,"button",function(){o()},c,3,4,5)),h.add(m=c.make.button(-5*Math.round(10*Math.random()),c.world.centerY+100,"button",a,c,0,1,2)),h.add(M=c.make.button(-5*Math.round(10*Math.random()),c.world.centerY+220,"button",u,c,6,7,8)),h.add(p=c.make.button(-5*Math.round(10*Math.random()),c.world.centerY+280,"pleinecran",r,c,3,4,5)),c.scale.isFullScreen?p.setFrames(0,1,2):p.setFrames(3,4,5),h.forEach(function(e){e.anchor.set(.5,0)})},update:function(){h.forEach(function(e){e.x+=(s.x-e.x)/4})}};return{init:function(e,n){c=e,i=n},setMusic:function(e){F=e,l.setMusic(F)},getMainMenu:function(){return g}}});