define(["LummingFactory","ColorEnum","VisionEnum","DoorsFactory","FilterFactory"],function(i,t,e,o,l){var n=null,m=null,r=function(e,o,l,n,r){this.color=o,this.spriteName="lumming_"+t.getName(o),i.Lumming.call(this,e,this.spriteName,l,n,r,m),this.animations.add("kill",[1,4,15,11],10,!0)};return r.prototype=Object.create(i.Lumming.prototype),r.prototype.constructor=r,r.prototype.collideWithDoor=function(i){return this.color==i.color?(this.body.velocity.x=0,this.animations.play("kill"),this.color=null,1):0},r.prototype.collideWithFilter=function(e){if(null!=this.color){var o=this.color,l=t.getValue(o);e.isAdditive()?(l|=t.getValue(e.getColor()),this.color=t.getColorKnowingValue(l)):(l&=t.getValue(e.getColor()),this.color=t.getColorKnowingValue(l)),o!=this.color&&(0==l?(this.body.velocity.x=0,this.body.velocity.y=-100,this.body.gravity.y=-100,this.animations.play("kill"),this.color=null):i.Lumming.prototype.updateColor.call(this,"lumming_"+t.getName(this.color)))}},r.prototype.update=function(){i.Lumming.prototype.update.call(this)},{init:function(t){n=t,m=e.getVisionEnum().VISIBLE,i.init(n),n.load.spritesheet("lumming_blue","media/img/lumming_blue.png",32,32,32),n.load.spritesheet("lumming_cyan","media/img/lumming_cyan.png",32,32,32),n.load.spritesheet("lumming_green","media/img/lumming_green.png",32,32,32),n.load.spritesheet("lumming_magenta","media/img/lumming_magenta.png",32,32,32),n.load.spritesheet("lumming_red","media/img/lumming_red.png",32,32,32),n.load.spritesheet("lumming_white","media/img/lumming_white.png",32,32,32),n.load.spritesheet("lumming_yellow","media/img/lumming_yellow.png",32,32,32)},create:function(i,t,e,o){return new r(n,i,t,e,o,m)}}});