define(["Images","LummingFactory","VisibleLummingFactory","ColorEnum","MusicFactory","PlatformFactory","DoorsFactory","MenuFactoryTest","VisionEnum","Transition","FilterFactory","RadioLummingFactory","ItemsLevel","MiroirFactory"],function(e,t,o,a,n,r,i,u,d,l,c,s,m,p){function g(e,t){if(2==e.getDefautVision()){var o=e.collideWithDoor(t);1==o&&(F+=1,text.setText(F+"/"+D))}}function f(){h.add.sprite(0,0,"transitionBackground"),h.add.sprite(184,265,"logo");null!=v&&(v.getMusic().fadeOut(700),v.getMusic().onFadeComplete.dispatch(),v.getMusic().onFadeComplete.addOnce(function(){v=null,h.state.start("Level4Demo")},h))}function y(){h.add.sprite(0,0,"transitionBackground"),h.add.sprite(184,265,"logo");null!=v&&(v.getMusic().fadeOut(700),v.getMusic().onFadeComplete.dispatch(),v.getMusic().onFadeComplete.addOnce(function(){v=null,h.state.start("MainMenu")},h))}var h,D=0,F=0,E=null,M=null,b=null,v=null,C=null,L=null,I={preload:function(){v=n.create("level1","media/audio/Level 1.ogg"),h.load.image("buttonDiamond","media/img/menuButton.png"),h.load.image("buttonRefresh","media/img/refresh.png"),h.load.image("cliquez","media/img/cliquezPourCommencer.png"),r.init(h),o.init(h),s.init(h),u.init(h)},create:function(){F=0,v.play(),e.boot().create(),h.physics.startSystem(Phaser.Physics.ARCADE),L=d.getVisionEnum().VISIBLE,M=h.add.group(),M.enableBody=!0,platform1=r.create(0,300,!1),platform2=r.create(300,300,!1),platform3=r.create(0,400,!1),platform4=r.create(300,400,!1),platform5=r.create(600,400,!1),M.add(platform1),M.add(platform2),M.add(platform3),M.add(platform4),M.add(platform5),_groupDoors=h.add.group(),_groupDoors.enableBody=!0,door2=i.create(a.getColorEnum().YELLOW,600,270),_groupDoors.add(door2),b=h.add.group(),lum1=o.create(a.getColorEnum().WHITE,20,200,50),lum2=o.create(a.getColorEnum().RED,50,200,50),lumRadio=s.create(400,350,-90),b.add(lum1),b.add(lum2),b.add(lumRadio),D=2,text=h.add.text(750,0,F+"/"+D,{align:"center"}),button_menu=h.add.button(32,0,"buttonDiamond",y,h),button_restart=h.add.button(650,0,"buttonRefresh",f,h),C=u.create(),m.reinit(h);var t=this.add.sprite(100,300,"cliquez");t.scale.set(.7,.7),h.input.onDown.add(function(){h.paused&&(h.paused=!1,t.destroy())},h),h.paused=!0},update:function(){C.update(),h.physics.arcade.collide(b,M),h.physics.arcade.overlap(b,_groupDoors,g,null,h),h.physics.arcade.overlap(b,m.getGroupItem(),m.collideItem,null,h),b.forEach(function(e){e.update(L)}),_groupDoors.forEach(function(e){e.update()}),D==F&&l.nextState("MainMenu",v)}};return{init:function(e,t){h=e,E=t},getLevel4Demo:function(){return I}}});