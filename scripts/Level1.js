define(["Images","LummingFactory","VisibleLummingFactory","ColorEnum","MusicFactory","PlatformFactory","DoorsFactory","MenuFactoryTest","VisionEnum","Transition","FilterFactory","RadioLummingFactory","ItemsLevel","MiroirFactory"],function(e,t,a,o,l,n,d,i,r,u,c,m,s,p){function g(e,t){if(2==e.getDefautVision()){var a=e.collideWithDoor(t);1==a&&(D+=1,A.setText(D+"/"+C))}}function f(e,t){2==e.getDefaultVision&&e.collideWithFilter(t)}function y(){v.physics.arcade.overlap(lum1,O,E,null,v)}function E(e){e.position.x=0,e.position.y=0}function h(){v.add.sprite(0,0,"transitionBackground"),v.add.sprite(184,265,"logo");null!=x&&(x.getMusic().fadeOut(700),x.getMusic().onFadeComplete.dispatch(),x.getMusic().onFadeComplete.addOnce(function(){x=null,v.state.start("Level1")},v))}function b(){v.add.sprite(0,0,"transitionBackground"),v.add.sprite(184,265,"logo");null!=x&&(x.getMusic().fadeOut(700),x.getMusic().onFadeComplete.dispatch(),x.getMusic().onFadeComplete.addOnce(function(){x=null,v.state.start("MainMenu")},v))}var F,L,v=null,C=0,D=0,M=null,R=null,B=null,O=null,I=null,V=null,W=null,x=null,A=null,P=null,S=null,T={preload:function(){x=l.create("level1","media/audio/Level 1.ogg"),v.load.image("buttonDiamond","media/img/diamond.png"),v.load.image("buttonRefresh","media/img/refresh.png"),v.load.image("cliquez","media/img/cliquezPourCommencer.png"),a.init(v),n.init(v),d.init(v),i.init(v),c.init(v),p.init(v),m.init(v)},create:function(){D=0,x.play(),e.boot().create(),S=r.getVisionEnum().VISIBLE,v.physics.startSystem(Phaser.Physics.ARCADE),R=v.add.group(),R.enableBody=!0,platform1=n.create(-200,100,!1),platform2=n.create(100,200,!1),platform3=n.create(400,300,!1),platform4=n.create(700,280,!1),platform5=n.create(0,504,!1),platform6=n.create(400,504,!1),R.add(platform1),R.add(platform2),R.add(platform3),R.add(platform4),R.add(platform5),R.add(platform6),O=v.add.group(),O.enableBody=!0,lol1=n.create(-200,100,!1),lol2=n.create(100,200,!1),lol3=n.create(400,300,!1),lol4=n.create(700,280,!1),O.add(lol1),O.add(lol2),O.add(lol3),O.add(lol4),P=i.create(),V=v.add.group(),V.enableBody=!0,door1=d.create(o.getColorEnum().RED,0,470),door2=d.create(o.getColorEnum().YELLOW,600,470),V.add(door1),V.add(door2),B=v.add.group(),lum1=a.create(o.getColorEnum().RED,0,0,0),lum1.inputEnabled=!0,lum1.input.enableDrag(),lum1.events.onDragStop.add(y,v),lum2=a.create(o.getColorEnum().YELLOW,100,0,-200),lum3=a.create(o.getColorEnum().YELLOW,500,0,-100),lumRadio=m.create(200,0,-90),C=3,A=v.add.text(750,0,D+"/"+C,{align:"center"}),B.add(lum1),B.add(lum2),B.add(lum3),B.add(lumRadio),I=v.add.group(),I.enableBody=!0,filter1=c.create(o.getColorEnum().GREEN,200,400),filter2=c.create(o.getColorEnum().MAGENTA,300,470),I.add(filter1),I.add(filter2),W=v.add.group(),W.enableBody=!0,miroir1=p.create(100,470,!0),W.add(miroir1),L=v.add.button(32,0,"buttonDiamond",b,v),F=v.add.button(650,0,"buttonRefresh",h,v),s.reinit(v);var t=this.add.sprite(100,300,"cliquez");t.scale.set(.7,.7),v.input.onDown.add(function(){v.paused&&(v.paused=!1,t.destroy())},v),v.paused=!0,s.setgroup(B)},update:function(){v.physics.arcade.collide(B,R),v.physics.arcade.collide(B,W),v.physics.arcade.overlap(B,V,g,null,v),v.physics.arcade.overlap(B,s.getGroupItem(),s.collideItem,null,v),v.physics.arcade.overlap(B,I,f,null,v),P.update(),B.forEach(function(e){e.update(S)}),V.forEach(function(e){e.update()}),C==D&&u.nextState("Level2",x)}};return{init:function(e,t){v=e,M=t},getLevel1:function(){return T}}});