define(function(){var t=null,i=function(i,s){this.key=i,this.baseURL="",this.url=s,t.load.audio(this.key,this.url),this.music=null};return i.prototype=Object.create(i.prototype),i.prototype.constructor=i,i.prototype.getMusic=function(){return this.music},i.prototype.isPlaying=function(){return 1==this.music.isPlaying},i.prototype.play=function(){this.music=t.add.audio(this.key),this.music.loop=!0,this.music.play()},i.prototype.stop=function(i){if(null!=this.music&&1==this.music.isPlaying){for(this.music.fadeOut(700);this.music.volume>0;);this.music.onFadeComplete.dispatch(),this.music.onFadeComplete.addOnce(function(){t.state.start(i)},t)}},{init:function(i){t=i},create:function(t,s){return new i(t,s)}}});